{"ast":null,"code":"import _slicedToArray from\"/Users/kenishdahal/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./index.css';import{createContext,useState,useEffect}from'react';import Header from'./components/Header';import Employees from'./pages/Employees';import{BrowserRouter,Routes,Route}from'react-router-dom';import Customers from'./pages/Customers';import Dictionary from'./pages/Dictionary';import Definition from'./pages/Definition';import NotFound from'./components/NotFound';import Customer from'./pages/Customer';import Login from'./pages/Login';import Register from'./pages/Register';import{baseUrl}from'./shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginContext=/*#__PURE__*/createContext();function App(){useEffect(function(){function refreshTokens(){if(localStorage.refresh){var url=baseUrl+'api/token/refresh/';fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({refresh:localStorage.refresh})}).then(function(response){return response.json();}).then(function(data){localStorage.access=data.access;localStorage.refresh=data.refresh;setLoggedIn(true);});}}var minute=1000*60;refreshTokens();setInterval(refreshTokens,minute*3);},[]);var _useState=useState(localStorage.access?true:false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];function changeLoggedIn(value){setLoggedIn(value);if(value===false){localStorage.clear();}}return/*#__PURE__*/_jsx(LoginContext.Provider,{value:[loggedIn,changeLoggedIn],children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/employees\",element:/*#__PURE__*/_jsx(Employees,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dictionary\",element:/*#__PURE__*/_jsx(Dictionary,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dictionary/:search\",element:/*#__PURE__*/_jsx(Definition,{},new Date().getTime())}),/*#__PURE__*/_jsx(Route,{path:\"/customers\",element:/*#__PURE__*/_jsx(Customers,{})}),/*#__PURE__*/_jsx(Route,{path:\"/customers/:id\",element:/*#__PURE__*/_jsx(Customer,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/404\",element:/*#__PURE__*/_jsx(NotFound,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})})})});}export default App;","map":{"version":3,"names":["createContext","useState","useEffect","Header","Employees","BrowserRouter","Routes","Route","Customers","Dictionary","Definition","NotFound","Customer","Login","Register","baseUrl","LoginContext","App","refreshTokens","localStorage","refresh","url","fetch","method","headers","body","JSON","stringify","then","response","json","data","access","setLoggedIn","minute","setInterval","loggedIn","changeLoggedIn","value","clear","Date","getTime"],"sources":["/Users/kenishdahal/react/src/App.js"],"sourcesContent":["import './index.css';\nimport { createContext, useState, useEffect } from 'react';\nimport Header from './components/Header';\nimport Employees from './pages/Employees';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Customers from './pages/Customers';\nimport Dictionary from './pages/Dictionary';\nimport Definition from './pages/Definition';\nimport NotFound from './components/NotFound';\nimport Customer from './pages/Customer';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport { baseUrl } from './shared';\n\nexport const LoginContext = createContext();\n\nfunction App() {\n    useEffect(() => {\n        function refreshTokens() {\n            if (localStorage.refresh) {\n                const url = baseUrl + 'api/token/refresh/';\n                fetch(url, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({\n                        refresh: localStorage.refresh,\n                    }),\n                })\n                    .then((response) => {\n                        return response.json();\n                    })\n                    .then((data) => {\n                        localStorage.access = data.access;\n                        localStorage.refresh = data.refresh;\n                        setLoggedIn(true);\n                    });\n            }\n        }\n\n        const minute = 1000 * 60;\n        refreshTokens();\n        setInterval(refreshTokens, minute * 3);\n    }, []);\n\n    const [loggedIn, setLoggedIn] = useState(\n        localStorage.access ? true : false\n    );\n\n    function changeLoggedIn(value) {\n        setLoggedIn(value);\n        if (value === false) {\n            localStorage.clear();\n        }\n    }\n\n    return (\n        <LoginContext.Provider value={[loggedIn, changeLoggedIn]}>\n            <BrowserRouter>\n                <Header>\n                    <Routes>\n                        <Route path=\"/employees\" element={<Employees />} />\n                        <Route path=\"/dictionary\" element={<Dictionary />} />\n                        <Route\n                            path=\"/dictionary/:search\"\n                            element={<Definition key={new Date().getTime()} />}\n                        />\n                        <Route path=\"/customers\" element={<Customers />} />\n                        <Route path=\"/customers/:id\" element={<Customer />} />\n                        <Route path=\"/login\" element={<Login />} />\n                        <Route path=\"/register\" element={<Register />} />\n                        <Route path=\"/404\" element={<NotFound />} />\n                        <Route path=\"*\" element={<NotFound />} />\n                    </Routes>\n                </Header>\n            </BrowserRouter>\n        </LoginContext.Provider>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}