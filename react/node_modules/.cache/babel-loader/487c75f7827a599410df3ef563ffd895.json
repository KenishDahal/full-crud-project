{"ast":null,"code":"import _slicedToArray from\"/Users/kenishdahal/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useContext}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import AddCustomer from'../components/AddCustomer';import{baseUrl}from'../shared';import{LoginContext}from'../App';import useFetch from'../hooks/UseFetch';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Customers(){var _useContext=useContext(LoginContext),_useContext2=_slicedToArray(_useContext,2),loggedIn=_useContext2[0],setLoggedIn=_useContext2[1];//const [customers, setCustomers] = useState();\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];function toggleShow(){setShow(!show);}var location=useLocation();var navigate=useNavigate();var url=baseUrl+'api/customers/';var _useFetch=useFetch(url,{method:'GET',headers:{'Content-Type':'application/json',Authorization:'Bearer '+localStorage.getItem('access')}}),request=_useFetch.request,appendData=_useFetch.appendData,_useFetch$data=_useFetch.data;_useFetch$data=_useFetch$data===void 0?{}:_useFetch$data;var customers=_useFetch$data.customers,errorStatus=_useFetch.errorStatus;useEffect(function(){request();},[]);//useEffect(() => {\n//    console.log(request, appendData, customers, errorStatus);\n//});\nfunction newCustomer(name,industry){appendData({name:name,industry:industry});if(!errorStatus){toggleShow();}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Here are our customers:\"}),customers?customers.map(function(customer){return/*#__PURE__*/_jsx(\"div\",{className:\"m-2\",children:/*#__PURE__*/_jsx(Link,{to:'/customers/'+customer._id,children:/*#__PURE__*/_jsx(\"button\",{className:\"no-underline bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded\",children:customer.name})})},customer.id);}):null,/*#__PURE__*/_jsx(AddCustomer,{newCustomer:newCustomer,show:show,toggleShow:toggleShow})]});}","map":{"version":3,"names":["useEffect","useState","useContext","Link","useNavigate","useLocation","AddCustomer","baseUrl","LoginContext","useFetch","Customers","loggedIn","setLoggedIn","show","setShow","toggleShow","location","navigate","url","method","headers","Authorization","localStorage","getItem","request","appendData","data","customers","errorStatus","newCustomer","name","industry","map","customer","_id","id"],"sources":["/Users/kenishdahal/react/src/pages/Customers.js"],"sourcesContent":["import { useEffect, useState, useContext } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport AddCustomer from '../components/AddCustomer';\nimport { baseUrl } from '../shared';\nimport { LoginContext } from '../App';\nimport useFetch from '../hooks/UseFetch';\n\nexport default function Customers() {\n    const [loggedIn, setLoggedIn] = useContext(LoginContext);\n    //const [customers, setCustomers] = useState();\n    const [show, setShow] = useState(false);\n\n    function toggleShow() {\n        setShow(!show);\n    }\n\n    const location = useLocation();\n    const navigate = useNavigate();\n\n    const url = baseUrl + 'api/customers/';\n    const {\n        request,\n        appendData,\n        data: { customers } = {},\n        errorStatus,\n    } = useFetch(url, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            Authorization: 'Bearer ' + localStorage.getItem('access'),\n        },\n    });\n\n    useEffect(() => {\n        request();\n    }, []);\n\n    //useEffect(() => {\n    //    console.log(request, appendData, customers, errorStatus);\n    //});\n\n    function newCustomer(name, industry) {\n        appendData({ name: name, industry: industry });\n\n        if (!errorStatus) {\n            toggleShow();\n        }\n    }\n\n    return (\n        <>\n            <h1>Here are our customers:</h1>\n            {customers\n                ? customers.map((customer) => {\n                      return (\n                          <div className=\"m-2\" key={customer.id}>\n                              <Link to={'/customers/' + customer._id}>\n                                  <button className=\"no-underline bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded\">\n                                      {customer.name}\n                                  </button>\n                              </Link>\n                          </div>\n                      );\n                  })\n                : null}\n\n            <AddCustomer\n                newCustomer={newCustomer}\n                show={show}\n                toggleShow={toggleShow}\n            />\n        </>\n    );\n}\n"],"mappings":"8GAAA,OAASA,SAAT,CAAoBC,QAApB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,IAAT,CAAeC,WAAf,CAA4BC,WAA5B,KAA+C,kBAA/C,CACA,MAAOC,YAAP,KAAwB,2BAAxB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,OAASC,YAAT,KAA6B,QAA7B,CACA,MAAOC,SAAP,KAAqB,mBAArB,C,6IAEA,cAAe,SAASC,UAAT,EAAqB,CAChC,gBAAgCR,UAAU,CAACM,YAAD,CAA1C,4CAAOG,QAAP,iBAAiBC,WAAjB,iBACA;AACA,cAAwBX,QAAQ,CAAC,KAAD,CAAhC,wCAAOY,IAAP,eAAaC,OAAb,eAEA,QAASC,WAAT,EAAsB,CAClBD,OAAO,CAAC,CAACD,IAAF,CAAP,CACH,CAED,GAAMG,SAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,SAAQ,CAAGb,WAAW,EAA5B,CAEA,GAAMc,IAAG,CAAGX,OAAO,CAAG,gBAAtB,CACA,cAKIE,QAAQ,CAACS,GAAD,CAAM,CACdC,MAAM,CAAE,KADM,CAEdC,OAAO,CAAE,CACL,eAAgB,kBADX,CAELC,aAAa,CAAE,UAAYC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAFtB,CAFK,CAAN,CALZ,CACIC,OADJ,WACIA,OADJ,CAEIC,UAFJ,WAEIA,UAFJ,0BAGIC,IAHJ,wCAG0B,EAH1B,mBAGYC,UAHZ,gBAGYA,SAHZ,CAIIC,WAJJ,WAIIA,WAJJ,CAaA5B,SAAS,CAAC,UAAM,CACZwB,OAAO,GACV,CAFQ,CAEN,EAFM,CAAT,CAIA;AACA;AACA;AAEA,QAASK,YAAT,CAAqBC,IAArB,CAA2BC,QAA3B,CAAqC,CACjCN,UAAU,CAAC,CAAEK,IAAI,CAAEA,IAAR,CAAcC,QAAQ,CAAEA,QAAxB,CAAD,CAAV,CAEA,GAAI,CAACH,WAAL,CAAkB,CACdb,UAAU,GACb,CACJ,CAED,mBACI,wCACI,+CADJ,CAEKY,SAAS,CACJA,SAAS,CAACK,GAAV,CAAc,SAACC,QAAD,CAAc,CACxB,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAE,cAAgBA,QAAQ,CAACC,GAAnC,uBACI,eAAQ,SAAS,CAAC,uFAAlB,UACKD,QAAQ,CAACH,IADd,EADJ,EADJ,EAA0BG,QAAQ,CAACE,EAAnC,CADJ,CASH,CAVD,CADI,CAYJ,IAdV,cAgBI,KAAC,WAAD,EACI,WAAW,CAAEN,WADjB,CAEI,IAAI,CAAEhB,IAFV,CAGI,UAAU,CAAEE,UAHhB,EAhBJ,GADJ,CAwBH"},"metadata":{},"sourceType":"module"}