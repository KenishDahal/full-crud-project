{"ast":null,"code":"import _slicedToArray from\"/Users/kenishdahal/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from'react';import{baseUrl}from'../shared';import{useLocation,useNavigate}from'react-router-dom';import{LoginContext}from'../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useContext=useContext(LoginContext),_useContext2=_slicedToArray(_useContext,2),loggedIn=_useContext2[0],setLoggedIn=_useContext2[1];var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var location=useLocation();var navigate=useNavigate();function login(e){e.preventDefault();var url=baseUrl+'api/token/';fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(response){return response.json();}).then(function(data){var _location$state;localStorage.setItem('access',data.access);localStorage.setItem('refresh',data.refresh);setLoggedIn(true);navigate(location!==null&&location!==void 0&&(_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.previousUrl?location.state.previousUrl:'/customers');});}return/*#__PURE__*/_jsxs(\"form\",{className:\"m-2 w-full max-w-sm\",id:\"customer\",onSubmit:login,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/4\",children:/*#__PURE__*/_jsx(\"label\",{for:\"username\",children:\"Username\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-3/4\",children:/*#__PURE__*/_jsx(\"input\",{className:\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500\",id:\"username\",type:\"text\",value:username,onChange:function onChange(e){setUsername(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/4\",children:/*#__PURE__*/_jsx(\"label\",{for:\"password\",children:\"Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-3/4\",children:/*#__PURE__*/_jsx(\"input\",{id:\"password\",className:\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500\",type:\"password\",value:password,onChange:function onChange(e){setPassword(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded\",children:\"Login\"})]});}","map":{"version":3,"names":["useState","useEffect","useContext","baseUrl","useLocation","useNavigate","LoginContext","Login","loggedIn","setLoggedIn","username","setUsername","password","setPassword","location","navigate","login","e","preventDefault","url","fetch","method","headers","body","JSON","stringify","then","response","json","data","localStorage","setItem","access","refresh","state","previousUrl","target","value"],"sources":["/Users/kenishdahal/react/src/pages/Login.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { baseUrl } from '../shared';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { LoginContext } from '../App';\n\nexport default function Login() {\n    const [loggedIn, setLoggedIn] = useContext(LoginContext);\n    const [username, setUsername] = useState();\n    const [password, setPassword] = useState();\n\n    const location = useLocation();\n    const navigate = useNavigate();\n\n    function login(e) {\n        e.preventDefault();\n        const url = baseUrl + 'api/token/';\n        fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                username: username,\n                password: password,\n            }),\n        })\n            .then((response) => {\n                return response.json();\n            })\n            .then((data) => {\n                localStorage.setItem('access', data.access);\n                localStorage.setItem('refresh', data.refresh);\n                setLoggedIn(true);\n                navigate(\n                    location?.state?.previousUrl\n                        ? location.state.previousUrl\n                        : '/customers'\n                );\n            });\n    }\n\n    return (\n        <form className=\"m-2 w-full max-w-sm\" id=\"customer\" onSubmit={login}>\n            <div className=\"md:flex md:items-center mb-6\">\n                <div className=\"md:w-1/4\">\n                    <label for=\"username\">Username</label>\n                </div>\n\n                <div className=\"md:w-3/4\">\n                    <input\n                        className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500\"\n                        id=\"username\"\n                        type=\"text\"\n                        value={username}\n                        onChange={(e) => {\n                            setUsername(e.target.value);\n                        }}\n                    />\n                </div>\n            </div>\n\n            <div className=\"md:flex md:items-center mb-6\">\n                <div className=\"md:w-1/4\">\n                    <label for=\"password\">Password</label>\n                </div>\n\n                <div className=\"md:w-3/4\">\n                    <input\n                        id=\"password\"\n                        className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500\"\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => {\n                            setPassword(e.target.value);\n                        }}\n                    />\n                </div>\n            </div>\n            <button className=\"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded\">\n                Login\n            </button>\n        </form>\n    );\n}\n"],"mappings":"8GAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,OAASC,YAAT,KAA6B,QAA7B,C,wFAEA,cAAe,SAASC,MAAT,EAAiB,CAC5B,gBAAgCL,UAAU,CAACI,YAAD,CAA1C,4CAAOE,QAAP,iBAAiBC,WAAjB,iBACA,cAAgCT,QAAQ,EAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAAgCX,QAAQ,EAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,SAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,SAAQ,CAAGV,WAAW,EAA5B,CAEA,QAASW,MAAT,CAAeC,CAAf,CAAkB,CACdA,CAAC,CAACC,cAAF,GACA,GAAMC,IAAG,CAAGhB,OAAO,CAAG,YAAtB,CACAiB,KAAK,CAACD,GAAD,CAAM,CACPE,MAAM,CAAE,MADD,CAEPC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFF,CAKPC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBf,QAAQ,CAAEA,QADO,CAEjBE,QAAQ,CAAEA,QAFO,CAAf,CALC,CAAN,CAAL,CAUKc,IAVL,CAUU,SAACC,QAAD,CAAc,CAChB,MAAOA,SAAQ,CAACC,IAAT,EAAP,CACH,CAZL,EAaKF,IAbL,CAaU,SAACG,IAAD,CAAU,qBACZC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+BF,IAAI,CAACG,MAApC,EACAF,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAgCF,IAAI,CAACI,OAArC,EACAxB,WAAW,CAAC,IAAD,CAAX,CACAM,QAAQ,CACJD,QAAQ,OAAR,EAAAA,QAAQ,SAAR,mBAAAA,QAAQ,CAAEoB,KAAV,oDAAiBC,WAAjB,CACMrB,QAAQ,CAACoB,KAAT,CAAeC,WADrB,CAEM,YAHF,CAAR,CAKH,CAtBL,EAuBH,CAED,mBACI,cAAM,SAAS,CAAC,qBAAhB,CAAsC,EAAE,CAAC,UAAzC,CAAoD,QAAQ,CAAEnB,KAA9D,wBACI,aAAK,SAAS,CAAC,8BAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACI,cAAO,GAAG,CAAC,UAAX,sBADJ,EADJ,cAKI,YAAK,SAAS,CAAC,UAAf,uBACI,cACI,SAAS,CAAC,qKADd,CAEI,EAAE,CAAC,UAFP,CAGI,IAAI,CAAC,MAHT,CAII,KAAK,CAAEN,QAJX,CAKI,QAAQ,CAAE,kBAACO,CAAD,CAAO,CACbN,WAAW,CAACM,CAAC,CAACmB,MAAF,CAASC,KAAV,CAAX,CACH,CAPL,EADJ,EALJ,GADJ,cAmBI,aAAK,SAAS,CAAC,8BAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACI,cAAO,GAAG,CAAC,UAAX,sBADJ,EADJ,cAKI,YAAK,SAAS,CAAC,UAAf,uBACI,cACI,EAAE,CAAC,UADP,CAEI,SAAS,CAAC,qKAFd,CAGI,IAAI,CAAC,UAHT,CAII,KAAK,CAAEzB,QAJX,CAKI,QAAQ,CAAE,kBAACK,CAAD,CAAO,CACbJ,WAAW,CAACI,CAAC,CAACmB,MAAF,CAASC,KAAV,CAAX,CACH,CAPL,EADJ,EALJ,GAnBJ,cAoCI,eAAQ,SAAS,CAAC,0EAAlB,mBApCJ,GADJ,CA0CH"},"metadata":{},"sourceType":"module"}